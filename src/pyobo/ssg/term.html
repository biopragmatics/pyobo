{% extends "base.html" %}

{% block title %}{{ term.name or term.identifier }}{% endblock title %}

{% block content -%}
    <div class="card">
        <h5 class="card-header">
            <span class="badge badge-info">Term</span>
            {{ term.name or term.identifier }}
            {% if term.is_obsolete %}
                <span class="badge badge-warning">Obsolete</span>
            {% endif %}
        </h5>
        <div class="card-body">
            {% if term.definition %}
                <p>{{ term.definition }}</p>
            {% endif %}
            <dl>
                <dt>Local Unique Identifier</dt>
                <dd>
                    <a href="{{ term.bioregistry_link }}">{{ term.identifier }}</a>
                </dd>
                {% if term.namespace %}
                    <dt>Namespace</dt>
                    <dd>{{ term.namespace }}</dd>
                {% endif %}

                {{ list_references(term.alt_ids, "Alt. IDs") }}
                {% if term.synonyms %}
                    <dt>
                        <span class="badge badge-primary">Synonym</span>
                    </dt>
                    <dd>
                        <ul>
                            {% for synonym in term.synonyms %}
                                <li>{{ synonym.name }} ({{ synonym.specificity }})</li>
                            {% endfor %}
                        </ul>
                    </dd>
                {% endif %}
                {{ list_references(term.parents, "Parents") }}
                {{ list_references(children, "Children") }}
                {{ list_references(parts, "Parts") }}
                {% for xref in term.xrefs %}
                    <dt><span class="badge badge-primary">Xref</span> {{ bioregistry.get_name(xref.prefix) }}</dt>
                    <dd>{{ link_reference(xref) }}</dd>
                {% endfor %}
                {% for typedef, relations in term.relationships.items() %}
                    {% if relations|length > 0 %}
                    <dt>
                        <span class="badge badge-primary">Relation</span>
                        {% if typedef.name %}
                            {{ typedef.name }} ({{ link_reference(typedef) }})
                        {% else %}
                            {{ link_reference(typedef) }}
                        {% endif %}
                    </dt>
                    <dd>
                        <ul>
                            {% for relation in relations %}
                                <li>{{ link_reference(relation) }}</li>
                            {% endfor %}
                        </ul>
                    </dd>
                    {% endif %}
                {% endfor %}
                {% for property, values in term.properties.items() %}
                    {% if values|length > 0 %}
                    <dt>
                        <span class="badge badge-primary">Property</span>
                        {{ property }}
                    </dt>
                    <dd>
                        {% if values|length == 1 %}
                            {{ values[0] }}
                        {% else %}
                            <ul>
                                {% for value in values %}
                                    <li>{{ value }}</li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </dd>
                {% endif %}
                {% endfor %}
            </dl>
        </div>
    </div>
{%- endblock content %}
